# Katapult

Katapult creates an isolated development environment that can be 
configured to include a [JupyterHub](https://jupyter.org/hub) server, 
a [Quart](https://palletsprojects.com/projects/quart) api service, 
a [fasthtml](https://www.fastht.ml/) webapp, and the template for a python library. 
In addition, [Quarto](https://quarto.org/) is used to create static websites that 
integrate easily with github pages and provide downloadable html files of 
jupyter notebooks.

[view on github pages](https://ajp619.github.io/katapult/)

## Description

Katapult creates an isolated environment for each project that is easily 
portable from your laptop to any network infrastructure. It provides a single container 
that has the following tools:

* [JupyterHub](https://jupyter.org/hub): Explore data, prototype transformations 
  and models, and make publishable reports.
* [Quart](https://palletsprojects.com/projects/quart): Create an api that allows 
  programmatic access to information generated by your service.
* [fasthtml](https://www.fastht.ml/): Create dashboards and tools to help others 
  gain insight from your work.
* [Quarto](https://quarto.org/): Publish stand alone, interactive reports that can be 
  downloaded and distributed in various formats. Create project documentation using 
  Markdown and Jupyter.

It takes an opinionated view of the typical development process and provides many 
convenience functions to facilitate this process.

## Getting Started

### Dependencies

* *nix environment (e.g. linux, macOS). On Windows use wsl2.
* docker
* Python 3.12

### Installing

Install from github:
```bash
pipx install "git+https://github.com/ajp619/katapult#subdirectory=lib"
```

Enable katx (see [Help](#help)):
```bash
kat config
```

Launch entry point container:
```bash
kat hub
```

### Quickstart

Create a new project from the katapult template with:
```bash
kat init
```  
Enter the project name and accept the rest of the defaults. This will create a 
new directory for your project. 

Change to the new project directory and use:
```bash
katx run
```
This will build the container, launch it, render the static content, and show you the 
status of the services.

You can now access the container at http://localhost/\<project name\>

## Help

There are two commands: `kat` and `katx`.

`kat` is for managing high level concerns such as creating projects and 
creating the hub container that allows you to access all of your projects 
as path extensions (e.g. http://localhost/\<project name>).

To get help use:
```bash
kat --help
```

`katx` is for managing the each individual project.

To enable katx use:
```bash
kat config
```
This will add code to your .bashrc file that will dynamically add `katx` to your path 
when you enter a project directory. (See [Dynamic Path Updates](#dynamic-path-updates)).

To get help with `katx` use:
```bash
katx --help
```
while in the project directory (or any subfolder).


## Version History

* 0.1
    * Initial Release

## License

This project is licensed under the MIT License - see the LICENSE.md file for details

## Appendix

### Dynamic path updates

```bash
# Section added by katapult to dynamically add katx to path based on project
# Intended to be added to .bashrc
#
RAW_PATH="$PATH"
LAST_WD=`pwd`

augment_path() {
    target=".katapult"
    if [ "$PWD" = "$LAST_WD" ]; then return 0; fi;
    PATH_ADDITION=""
    scandir="$PWD"
    until [ "$scandir" = "" ]; do
    resolved_target="$scandir"/"$target"
    if [ -d "$resolved_target" ]; then
        PATH_ADDITION="$PATH_ADDITION:$resolved_target"
    fi
    scandir="${scandir%/*}"
    done
    PATH="$PATH_ADDITION:$RAW_PATH"
    LAST_WD=`pwd`
}

if [ -z ${PROMPT_COMMAND+x} ]; then
    # prompt not found
    PROMPT_COMMAND="augment_path"
else
    # prompt found
    PROMPT_COMMAND="$PROMPT_COMMAND; augment_path"
fi
#
# End of section generated by katapult
```